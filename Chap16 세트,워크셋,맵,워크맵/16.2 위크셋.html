<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  
  <script>

    // 워크셋은 세트와 유사하지만, 객체만 포함할 수 있다.

    // let dad = {name : "daddy", age : 50};
    // let mom = {name : "mom" , age : 40};

    // const family = new WeakSet([dad,mom]);
    // console.log(family);

    // for (const person of family) {
    //   console.log(person);
    // }
    // TypeError: family is not iterable

    // WeakSet은 이터러블이 아니다. 이 예제처럼 WeakSet에 대해 for fo 루프를 사용하려고 하면 작동하지 않는 것을 확인할 수 있다.
    // WeakSet이 포함하는 객체가 '가비지 컬렉터(garbage collector)'에 의해 삭제되면 해당 객체는 WeakSet에서도 자동으로 삭제된다. 
    // (WeakSet의 경우 가비지 컬렉터에 의해 포함된 원소들이 언제든 삭제될 수 있기 때문에 의도적으로 원소들에 대한 반복을 수행할 수 없도록 설계되었다.)

    let dad = {name : "daddy", age : 50};
    let mom = {name : "mom" , age : 40};

    const family = new WeakSet([dad,mom]);

    dad = null;
    console.log(family);
    // WeakSet {{…}, {…}}

    console.log(family);
    // 브라우저 콘솔에서 이 예제를 실행하면, dad = null이 실행되고 얼마 후에 가비지 컬렉터가 실행되어, family에서 dad객체가 제거된 것을 볼 수 있다.
    // 이는 dad를 null로 설정했을 때 참조가 손실되었기 때문이다.

  </script>
</body>
</html>