<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  
  <script>

    // ES2017에서 async/await을 사용한 새로운 프로미스 작업 방식이 도입되었다.

    // 아래 코드는 프로미스를 사용하는 일반적인 방식이다.

    fetch('https://github.com/users/gottmi1').then(res => {
      // 응답을 json방식으로 반환
      return res.json();
    }).then(res => {
      console.log(res);
      })
    .catch(err => {
      console.log(err);
    })
    // 이것은 깃허브 API로 특정 깃허브 사용자에 대한 정보를 가져와서 콘솔에 출력하는 매우 간단한 프로미스이다.

    function walk(amount) {
      return new Promise((resolve,reject) => {
        if (amount < 500) {
          reject("the value is too small");
        }
        setTimeout(() => resolve(`you walked for ${amount}ms`), amount);
      });
    }
    walk(1000).then(res => {
      console.log(res);
      return walk(500);
    }).then(res => {
      console.log(res);
      return walk(700);
    }).then(res => {
      console.log(res);
      return walk(800);
    }).then(res => {
      console.log(res);
      return walk(100);
    }).then(res => {
      console.log(res);
      return walk(400);
    }).then(res => {
      console.log(res);
      return walk(600);
    });

    // 단순한 흐름이므로 특별히 설명할 것은 없다.
    // 이제 async/await 문법을 사용해서 이 예제의 프로미스를 어떻게 다시 작성할 수 있는지 살펴보자

  </script>
</body>
</html>